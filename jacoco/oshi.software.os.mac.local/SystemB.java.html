<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>SystemB.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Operating System and Hardware Information</a> &gt; <a href="index.source.html" class="el_package">oshi.software.os.mac.local</a> &gt; <span class="el_source">SystemB.java</span></div><h1>SystemB.java</h1><pre class="source lang-java linenums">/**
 * Oshi (https://github.com/dblock/oshi)
 * 
 * Copyright (c) 2010 - 2015 The Oshi Project Team
 * 
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 * 
 * Contributors:
 * dblock[at]dblock[dot]org
 * alessandro[at]perucchi[dot]org
 * widdis[at]gmail[dot]com
 * https://github.com/dblock/oshi/graphs/contributors
 */
package oshi.software.os.mac.local;

import java.util.Arrays;
import java.util.List;

import com.sun.jna.Library;
import com.sun.jna.Native;
import com.sun.jna.Pointer;
import com.sun.jna.Structure;
import com.sun.jna.ptr.IntByReference;
import com.sun.jna.ptr.LongByReference;
import com.sun.jna.ptr.PointerByReference;

/**
 * Memory and CPU stats from vm_stat and sysctl
 * 
 * @author widdis[at]gmail[dot]com
 */
public interface SystemB extends Library {
	// TODO: Submit this class to JNA
<span class="fc" id="L37">	SystemB INSTANCE = (SystemB) Native.loadLibrary(&quot;System&quot;, SystemB.class);</span>

	// host_statistics()
	static int HOST_LOAD_INFO = 1;// System loading stats
	static int HOST_VM_INFO = 2; // Virtual memory stats
	static int HOST_CPU_LOAD_INFO = 3;// CPU load stats

	// host_statistics64()
	static int HOST_VM_INFO64 = 4; // 64-bit virtual memory stats
	static int HOST_EXTMOD_INFO64 = 5;// External modification stats
	static int HOST_EXPIRED_TASK_INFO = 6; // Statistics for expired tasks

	static int PROCESSOR_CPU_LOAD_INFO = 2;

	// host_cpu_load_info()
	static int CPU_STATE_MAX = 4;
	static int CPU_STATE_USER = 0;
	static int CPU_STATE_SYSTEM = 1;
	static int CPU_STATE_IDLE = 2;
	static int CPU_STATE_NICE = 3;

	// Data size
<span class="fc" id="L59">	static int UINT64_SIZE = Native.getNativeSize(long.class);</span>
<span class="fc" id="L60">	static int INT_SIZE = Native.getNativeSize(int.class);</span>

<span class="fc" id="L62">	public static class HostCpuLoadInfo extends Structure {</span>
<span class="fc" id="L63">		public int[] cpu_ticks = new int[CPU_STATE_MAX];</span>

		@Override
		protected List&lt;String&gt; getFieldOrder() {
<span class="fc" id="L67">			return Arrays.asList(new String[] { &quot;cpu_ticks&quot; });</span>
		}
	}

<span class="nc" id="L71">	public static class HostLoadInfo extends Structure {</span>
<span class="nc" id="L72">		public int[] avenrun = new int[3]; // scaled by LOAD_SCALE</span>
<span class="nc" id="L73">		public int[] mach_factor = new int[3]; // scaled by LOAD_SCALE</span>

		@Override
		protected List&lt;String&gt; getFieldOrder() {
<span class="nc" id="L77">			return Arrays.asList(new String[] { &quot;avenrun&quot;, &quot;mach_factor&quot; });</span>
		}
	}

<span class="fc" id="L81">	public static class VMStatistics extends Structure {</span>
		public int free_count; // # of pages free
		public int active_count; // # of pages active
		public int inactive_count; // # of pages inactive
		public int wire_count; // # of pages wired down
		public int zero_fill_count; // # of zero fill pages
		public int reactivations; // # of pages reactivated
		public int pageins; // # of pageins
		public int pageouts; // # of pageouts
		public int faults; // # of faults
		public int cow_faults; // # of copy-on-writes
		public int lookups; // object cache lookups
		public int hits; // object cache hits
		public int purgeable_count; // # of pages purgeable
		public int purges; // # of pages purged
		// # of pages speculative (included in free_count)
		public int speculative_count;

		@Override
		protected List&lt;String&gt; getFieldOrder() {
<span class="fc" id="L101">			return Arrays.asList(new String[] { &quot;free_count&quot;, &quot;active_count&quot;, &quot;inactive_count&quot;, &quot;wire_count&quot;,</span>
					&quot;zero_fill_count&quot;, &quot;reactivations&quot;, &quot;pageins&quot;, &quot;pageouts&quot;, &quot;faults&quot;, &quot;cow_faults&quot;, &quot;lookups&quot;,
					&quot;hits&quot;, &quot;purgeable_count&quot;, &quot;purges&quot;, &quot;speculative_count&quot; });
		}
	}

<span class="nc" id="L107">	public static class VMStatistics64 extends Structure {</span>
		public int free_count; // # of pages free
		public int active_count; // # of pages active
		public int inactive_count; // # of pages inactive
		public int wire_count; // # of pages wired down
		public long zero_fill_count; // # of zero fill pages
		public long reactivations; // # of pages reactivated
		public long pageins; // # of pageins
		public long pageouts; // # of pageouts
		public long faults; // # of faults
		public long cow_faults; // # of copy-on-writes
		public long lookups; // object cache lookups
		public long hits; // object cache hits
		public long purges; // # of pages purged
		public int purgeable_count; // # of pages purgeable
		// # of pages speculative (included in free_count)
		public int speculative_count;
		public long decompressions; // # of pages decompressed
		public long compressions; // # of pages compressed
		// # of pages swapped in (via compression segments)
		public long swapins;
		// # of pages swapped out (via compression segments)
		public long swapouts;
		// # of pages used by the compressed pager to hold all the
		// compressed data
		public int compressor_page_count;
		public int throttled_count; // # of pages throttled
		// # of pages that are file-backed (non-swap)
		public int external_page_count;
		public int internal_page_count; // # of pages that are anonymous
		// # of pages (uncompressed) held within the compressor.
		public long total_uncompressed_pages_in_compressor;

		@Override
		protected List&lt;String&gt; getFieldOrder() {
<span class="nc" id="L142">			return Arrays.asList(new String[] { &quot;free_count&quot;, &quot;active_count&quot;, &quot;inactive_count&quot;, &quot;wire_count&quot;,</span>
					&quot;zero_fill_count&quot;, &quot;reactivations&quot;, &quot;pageins&quot;, &quot;pageouts&quot;, &quot;faults&quot;, &quot;cow_faults&quot;, &quot;lookups&quot;,
					&quot;hits&quot;, &quot;purges&quot;, &quot;purgeable_count&quot;, &quot;speculative_count&quot;, &quot;decompressions&quot;, &quot;compressions&quot;,
					&quot;swapins&quot;, &quot;swapouts&quot;, &quot;compressor_page_count&quot;, &quot;throttled_count&quot;, &quot;external_page_count&quot;,
					&quot;internal_page_count&quot;, &quot;total_uncompressed_pages_in_compressor&quot; });
		}
	}

	int mach_host_self();

	int host_page_size(int machPort, LongByReference pPageSize);

	int host_statistics(int machPort, int hostStat, Object stats, IntByReference count);

	int host_statistics64(int machPort, int hostStat, Object stats, IntByReference count);

	int host_processor_info(int machPort, int flavor, IntByReference procCount, PointerByReference procInfo,
			IntByReference procInfoCount);

	int sysctl(int[] name, int namelen, Pointer oldp, IntByReference oldlenp, Pointer newp, int newlen);

	int sysctlbyname(String name, Pointer oldp, IntByReference oldlenp, Pointer newp, int newlen);
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>